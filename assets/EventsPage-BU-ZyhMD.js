import{a as S,j as e}from"./query-By2FkZ5k.js";import{r as l,L as w}from"./vendor-Bxm2pvdK.js";import{g as z,f as C,d as _,e as F}from"./index-D8pja-1O.js";import{S as L}from"./Select-B-0jrKDi.js";import{C as T}from"./Skeleton-DwcWZSGh.js";import{S as E,F as q,X as P,q as j,a as N,m as $,r as A}from"./ui-BgMx_JBB.js";function M(){const[g,v]=l.useState(""),[o,h]=l.useState(""),[n,p]=l.useState(""),[i,f]=l.useState(""),[c,a]=l.useState(1),[m,x]=l.useState(!1),d=[o,n,i].filter(Boolean).length,{data:r,isLoading:y}=S({queryKey:["events",{search:g,location:o,date:n,timeStatus:i,page:c}],queryFn:()=>F.getEvents({search:g,location:o,date:n,time_status:i,page:c,limit:12}).then(s=>s.data)}),b=(r==null?void 0:r.data)||[],u=r==null?void 0:r.pagination,k=_(s=>{v(s),a(1)},400);return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-6",children:"Sự kiện"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-[2]",children:[e.jsx(E,{className:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Tìm kiếm sự kiện...",onChange:s=>k(s.target.value),className:"w-full h-11 pl-10 pr-4 rounded-xl border border-input bg-background focus:ring-2 focus:ring-ring focus:border-transparent outline-none transition-all"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>x(!m),className:`h-11 px-4 rounded-xl border flex items-center gap-2 transition-all ${m||d>0?"bg-primary/10 border-primary text-primary":"bg-background border-input hover:bg-muted"}`,children:[e.jsx(q,{className:"size-4"}),e.jsx("span",{className:"font-medium hidden sm:inline",children:"Bộ lọc"}),d>0&&e.jsx("span",{className:"flex items-center justify-center size-5 rounded-full bg-primary text-primary-foreground text-xs font-bold",children:d})]}),m&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10 hidden sm:block delay-100",onClick:()=>x(!1)}),e.jsxs("div",{className:"absolute right-0 sm:left-0 sm:right-auto mt-2 w-72 sm:w-80 p-4 bg-card border border-border shadow-xl rounded-2xl z-20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-sm",children:"Lọc sự kiện"}),e.jsx("button",{onClick:()=>x(!1),className:"p-1 rounded-md hover:bg-muted text-muted-foreground transition-colors",children:e.jsx(P,{className:"size-4"})})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-muted-foreground mb-1 block",children:"Địa điểm"}),e.jsxs("div",{className:"relative",children:[e.jsx(j,{className:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-muted-foreground"}),e.jsx("input",{type:"text",value:o,onChange:s=>{h(s.target.value),a(1)},placeholder:"Nhập địa điểm...",className:"w-full h-10 pl-9 pr-4 rounded-lg border border-input bg-background text-sm focus:ring-2 focus:ring-ring focus:border-transparent outline-none transition-all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-muted-foreground mb-1 block",children:"Ngày tổ chức"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"date",value:n,onChange:s=>{p(s.target.value),a(1)},className:"w-full h-10 px-3 rounded-lg border border-input bg-background text-sm focus:ring-2 focus:ring-ring focus:border-transparent outline-none transition-all cursor-pointer"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-muted-foreground mb-1 block",children:"Trạng thái"}),e.jsx(L,{value:i,onChange:s=>{f(s),a(1)},placeholder:"Tất cả trạng thái",options:[{value:"",label:"Tất cả trạng thái"},{value:"upcoming",label:"Sắp diễn ra"},{value:"ongoing",label:"Đang diễn ra"},{value:"ended",label:"Đã kết thúc"}]})]}),d>0&&e.jsx("div",{className:"mt-2 pt-4 border-t border-border",children:e.jsx("button",{onClick:()=>{h(""),p(""),f(""),a(1)},className:"w-full py-2 text-sm text-red-500 font-medium hover:bg-red-500/10 rounded-lg transition-colors",children:"Xóa bộ lọc"})})]})]})]})]})]}),y?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Array.from({length:8}).map((s,t)=>e.jsx(T,{},t))}):b.length===0?e.jsxs("div",{className:"text-center py-20 text-muted-foreground",children:[e.jsx(N,{className:"size-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Không tìm thấy sự kiện nào"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:b.map((s,t)=>e.jsx($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t*.03},children:e.jsxs(w,{to:`/events/${s.id}`,className:"group block rounded-xl border border-border overflow-hidden bg-card hover:shadow-lg transition-all duration-300",children:[e.jsxs("div",{className:"relative aspect-video overflow-hidden",children:[e.jsx("img",{src:z(s.banner_image,{width:500}),alt:s.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500",loading:"lazy",crossOrigin:"anonymous"}),s.is_hot&&e.jsxs("span",{className:"absolute top-2 right-2 bg-orange-500 text-white text-xs font-medium px-2 py-1 rounded-full flex items-center gap-1",children:[e.jsx(A,{className:"size-3"})," Hot"]})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-semibold text-sm line-clamp-2 group-hover:text-primary transition-colors",children:s.title}),e.jsxs("div",{className:"mt-2 flex flex-col gap-1 text-xs text-muted-foreground",children:[s.start_time&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(N,{className:"size-3"})," ",C(s.start_time)]}),s.location&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(j,{className:"size-3"})," ",e.jsx("span",{className:"truncate",children:s.location})]})]})]})]})},s.id))}),u&&u.total_pages>1&&e.jsx("div",{className:"flex justify-center gap-2 mt-8",children:Array.from({length:u.total_pages}).map((s,t)=>e.jsx("button",{onClick:()=>a(t+1),className:`size-10 rounded-lg text-sm font-medium transition-colors ${c===t+1?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-accent"}`,children:t+1},t))})]})}export{M as default};
