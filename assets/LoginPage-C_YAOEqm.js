import{j as e}from"./query-By2FkZ5k.js";import{r,u as z,L as C}from"./vendor-Bxm2pvdK.js";import{l as L,B as p,i as f,u as T,h as l}from"./index-CLvu16Z-.js";import{b as P,c as _,m as V,v as q,E as F,G as M,J as O}from"./ui-BgMx_JBB.js";function $(){const[s,h]=r.useState("credentials"),[n,b]=r.useState(""),[c,j]=r.useState(""),[m,v]=r.useState(""),[x,N]=r.useState(!1),[k,d]=r.useState(!1),g=z(),{theme:y,toggleTheme:w}=L(),S=async t=>{var o,i,u;t.preventDefault(),d(!0);try{const{data:a}=await f.login({email:n,password:c});(o=a.data)!=null&&o.token?(T.getState().login({token:a.data.token,user:a.data.user}),l.success("Đăng nhập thành công!"),g(a.data.user.role==="admin"?"/admin":"/")):(g("/verify-otp",{state:{email:n,type:"login"}}),l.info("Vui lòng nhập mã OTP đã gửi vào email"))}catch(a){l.error(((u=(i=a.response)==null?void 0:i.data)==null?void 0:u.message)||"Email hoặc mật khẩu không đúng")}finally{d(!1)}},E=async t=>{var o,i;t.preventDefault(),d(!0);try{await f.register({email:n,password:c,full_name:m}),g("/verify-otp",{state:{email:n,password:c,full_name:m,type:"register"}}),l.info("Vui lòng nhập mã OTP đã gửi vào email")}catch(u){l.error(((i=(o=u.response)==null?void 0:o.data)==null?void 0:i.message)||"Đăng ký thất bại")}finally{d(!1)}};return e.jsxs("div",{className:"min-h-screen relative flex items-center justify-center px-4 bg-gradient-to-br from-primary/5 via-background to-orange-500/5",children:[e.jsx("div",{className:"absolute top-4 right-4 sm:top-6 sm:right-6",children:e.jsx(p,{variant:"ghost",size:"icon",onClick:w,className:"rounded-full hover:bg-muted/50",children:y==="dark"?e.jsx(P,{className:"size-5"}):e.jsx(_,{className:"size-5"})})}),e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("img",{src:"/new_ass_app/images/banner.png",alt:"EViENT",className:"h-20 w-auto object-contain mx-auto dark:hidden"}),e.jsx("img",{src:"/new_ass_app/images/logo.png",alt:"EViENT",className:"h-20 w-auto object-contain mx-auto hidden dark:block"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:s==="credentials"?"Đăng nhập vào tài khoản":"Tạo tài khoản mới"})]}),e.jsxs("div",{className:"bg-card border border-border rounded-2xl p-6 shadow-lg",children:[e.jsx("form",{onSubmit:s==="credentials"?S:E,children:e.jsxs("div",{className:"space-y-4",children:[s==="register"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Họ và tên"}),e.jsx("input",{type:"text",value:m,onChange:t=>v(t.target.value),required:!0,className:"w-full h-11 px-4 rounded-lg border border-input bg-background text-foreground focus:ring-2 focus:ring-ring focus:border-transparent outline-none transition-all",placeholder:"Nguyễn Văn A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-muted-foreground"}),e.jsx("input",{type:"email",value:n,onChange:t=>b(t.target.value),required:!0,className:"w-full h-11 pl-10 pr-4 rounded-lg border border-input bg-background text-foreground focus:ring-2 focus:ring-ring focus:border-transparent outline-none transition-all",placeholder:"email@example.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Mật khẩu"}),e.jsxs("div",{className:"relative",children:[e.jsx(F,{className:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-muted-foreground"}),e.jsx("input",{type:x?"text":"password",value:c,onChange:t=>j(t.target.value),required:!0,minLength:6,className:"w-full h-11 pl-10 pr-12 rounded-lg border border-input bg-background text-foreground focus:ring-2 focus:ring-ring focus:border-transparent outline-none transition-all",placeholder:"••••••••"}),e.jsx("button",{type:"button",onClick:()=>N(t=>!t),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:x?e.jsx(M,{className:"size-4"}):e.jsx(O,{className:"size-4"})})]})]}),s==="credentials"&&e.jsx("div",{className:"text-right",children:e.jsx(C,{to:"/forgot-password",className:"text-sm text-primary hover:underline",children:"Quên mật khẩu?"})}),e.jsx(p,{type:"submit",loading:k,className:"w-full",size:"lg",children:s==="credentials"?"Đăng nhập":"Đăng ký"})]})}),e.jsx("div",{className:"mt-4 text-center text-sm text-muted-foreground",children:s==="credentials"?e.jsxs(e.Fragment,{children:["Chưa có tài khoản?"," ",e.jsx("button",{onClick:()=>h("register"),className:"text-primary hover:underline font-medium",children:"Đăng ký"})]}):e.jsxs(e.Fragment,{children:["Đã có tài khoản?"," ",e.jsx("button",{onClick:()=>h("credentials"),className:"text-primary hover:underline font-medium",children:"Đăng nhập"})]})})]})]})]})}export{$ as default};
